<HTML lang='en'>
<HEAD>
	<meta charset="utf-8">
	<meta name="description" content="A progressive Web App for mindfull reading">
	<meta name="author" content="Eduard Ergenzinger, Pranita ">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<Title>Login</Title>
	<script type="text/javascript">
	//For comaptibility with Microsoft Edge
	window.addEventListener('load', async function(){
	if ( 'serviceWorker' in navigator ) {
		try{
		var registration=await navigator.serviceWorker.register('./serviceWorker.js');
		console.log('ServiceWorker was successfully installed with scope: ', registration.scope);
		document.getElementById('worker').innerHTML='serviceWorker.js active';
		document.getElementById('cache').innerHTML='Cache active';
		}catch (err){
		console.log(err);
		}
	}else{window.alert('Your browser does not support Service Workers, you will have to fetch the pages online every time');};
	});
		
	//connect to mongodb
	const MongoClient = require('mongodb').MongoClient;
	const assert = require('assert');

	// Connection URL
	const mongoDbServer = 'mongodb://mindread-shard-00-01-vxcck.gcp.mongodb.net:27017';

	// Database Name
	const dbName = 'MindRead';

	// Use connect method to connect to the server
	MongoClient.connect(mongoDbServer, function(err, client) {
	  if(error)
          console.log("Error while connecting to database: ", error);
          else
          console.log("Successfull connection to MongoDB Server");
	  client.close();
	});
	</script>
	
</HEAD>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="lightgreen">
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<link rel="manifest" href="/manifest.json">
<link rel="stylesheet" type="text/css" href="./styles.css">

<BODY>
<h1>Status</h1>
<sinfo>Page loaded in <i id='connection'>offline</i> mode<br>
Service Worker <i id='worker'>inactive</i><br>
<a id='cache'>No cache</a></sinfo><br>
<!--Login or Registration-->
<!--Login left-->
<table class='LRTable' id='LRForm'>
	<tr>
		<th>Login</th>
		<th>Register</th>
	</tr>
	<tr>
		<th>
			<form id=login>
			Username:<br>
			<input type="text" name="username"><br>
			Password:<br>
 			<input type="password" name="pwd"><br>
			<th><button onclick="login();">Login</button></th>	
			</form>
		</th>
		<th>
			<form id=register>
			Username:<br>
			<input type="text" name="username"><br>
			Password:<br>
 			<input type="password" name="pwd"><br>
			<input type="password" name="pwd2"><br>
			<th><button onclick="register();">Register</button></th>
			</form>
		</th>
	</tr>
</table><br>

</BODY>
</HTML>
<!--all further treatment operations will be done here-->
<!--<script src="./traitement.js" type="text/javascript"></script>-->
