<HTML>
<HEAD>
	<meta charset="utf-8">
	<Title>Geolocalisation</Title>
	<script type="text/javascript">
	window.addEventListener('load', async function(){
	if ( 'serviceWorker' in navigator ) {
		try{
		var registration=await navigator.serviceWorker.register('serviceWorker.js');
		console.log('ServiceWorker enregistré avec le scope: ', registration.scope);
		document.getElementById('worker').innerHTML='serviceWorker.js actif';
		document.getElementById('cache').innerHTML='Cache actif';
		}catch (err){
		console.log(err);
		}
	}else{window.alert('Votre navigateur ne supporte pas les Service Workers. Ce site ne fonctionnera pas en mode offline');};
	});
	</script>
</HEAD>

<link rel="manifest" href="./manifest.json">
<link rel="stylesheet" type="text/css" href="./styles.css">
<BODY>
<h1>Déterminer ma position et la partager</h1>
<sinfo>Chargé en mode <i id='connection'>offline</i><br>
Worker <i id='worker'>non activé</i><br>
<a id='cache'>Pas de cache local</a></sinfo><br>
<!--afficher la position GPS-->
<h2>Ma Position GPS</h2>
<table class='position' id='tablePosition'>
	<tr>
		<th>Latitude</th>
		<th>Longitude</th>
		<th>Précision</th>
		<th>Mise à jour</th>
		  <!-- <p id="para">Some text here</p> -->
		<th rowspan=2><button onclick="refreshGPS();">Mettre à jour</button></th>
	</tr>
	<tr>
		<td id='latitude'></td>
		<td id='longitude'></td>
		<td id='precision'></td>
		<td id='miseAjour'></td>
	</tr>
</table><br>
<!-- <a href="data:application/octet-stream;charset=utf-16le;base64,//5mAG8AbwAgAGIAYQByAAoA">text file</a> -->
<h2><a id='telecharger'>Telecharger mes coordonnees</a></h2>
<h2><link id='enregistrer' href='javascript:enregistrer()'>Enregistrer mes coordonnees</link></h2>
<!-- <a id='telecharger'>Télécharger</a><br><br> -->
<h2>Partager ma position</h2>
<table class='envoi'>
	<tr>
		<th>Destinataire</th>
		<th width=120>Envoyer par<th>
	</tr>
	<tr>
		<td><input id='destEmail' type='text' maxlength=50></td>
		<td><button onclick="email();">Email</td>
	</tr>
	<tr>
		<td><input id='destSMS' type='number' maxlength=15></td>
		<td><button onclick="sms();">SMS</td>
	</tr>
	<!-- <tr> -->
		<!-- <td><button onclick="facebook();">Facebook</td> -->
	<!-- </tr> -->
</table>
</BODY>
</HTML>
<!--concentre toutes les fonctions de traitement-->
<script src="./traitement.js" type="text/javascript"></script>
